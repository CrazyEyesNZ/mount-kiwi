<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Order Tracker</title>
  <link rel="stylesheet" href="styles.css">

  <!-- Firebase (Compat Version) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAONyQ-NzS4b40Bqeu7AqIWbelPKg9k_wo",
      authDomain: "sofix-8957d.firebaseapp.com",
      projectId: "sofix-8957d",
      storageBucket: "sofix-8957d.firebasestorage.app",
      messagingSenderId: "156447440286",
      appId: "1:156447440286:web:e3ebbbf9b52ce7e4b4aa8f"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
  <header>
    <!-- Navigation Buttons -->
    <div class="nav-buttons">
      <a href="MKOrders.html" class="nav-btn active" data-page="order" data-tooltip="Make an Order">📋</a>
      <a href="MKView.html" class="nav-btn" data-page="view" data-tooltip="View Orders">👁️</a>
      <button class="nav-btn disabled" data-page="progress" data-tooltip="Show Progress">📊</button>
      <button class="nav-btn disabled" data-page="packaging" data-tooltip="Packaging">📦</button>
      <button class="nav-btn disabled" data-page="shipping" data-tooltip="Shipping">🚚</button>
      <button class="nav-btn disabled" data-page="analytics" data-tooltip="Analytics">📈</button>
    </div>

    <!-- Logo and Title (Centered) -->
    <div class="header-center">
      <img src="Icons/mountkiwi.png" alt="Company Logo" class="logo" onerror="this.style.display='none'">
      <h1>Stock &amp; Orders Tracker</h1>
    </div>

    <!-- Right side space for future elements -->
    <div class="header-right"></div>
  </header>

  <main>
    <!-- Product Types Column -->
    <section id="product-types" class="panel">
      <h2>Product Types</h2>
      <div id="types-grid" class="types-grid"></div>
    </section>

    <!-- Varieties Column -->
    <section id="varieties-panel" class="panel">
      <h3>Varieties</h3>
      <div id="varieties-section" style="display: none;">
        <h4 id="selected-type-title">Select a product type</h4>
        <div id="varieties-grid" class="varieties-grid"></div>
      </div>
      <div id="varieties-placeholder" class="placeholder-text">
        Select a product type to see varieties
      </div>
    </section>

    <!-- Colors Column -->
    <section id="colors-panel" class="panel">
      <h3>Colors</h3>
      <div id="colors-section" style="display: none;">
        <h4 id="selected-variety-title">Select a variety</h4>
        <div id="colors-grid" class="colors-grid"></div>
        <p class="drag-hint">Drag to orders →</p>
      </div>
      <div id="colors-placeholder" class="placeholder-text">
        Select a variety to see colors
      </div>
    </section>

    <!-- Active Orders Column -->
    <section id="orders-panel" class="panel drop-zone">
      <div class="orders-header">
        <h2>Active Orders</h2>
        <div class="orders-actions">
          <button class="orders-btn save-btn" onclick="saveOrders()">💾 Save</button>
          <div id="grand-total" class="grand-total">Total: 0</div>
        </div>
      </div>
      <div class="orders-list" id="orders-list"></div>
    </section>
  </main>

  <!-- Size & Quantity Overlay -->
  <div id="size-overlay" class="overlay" style="display: none;">
    <div class="overlay-content">
      <div class="overlay-header">
        <h3 id="overlay-title">Select Size & Quantity</h3>
        <button class="close-btn" onclick="closeOverlay()">&times;</button>
      </div>
      <div class="product-preview">
        <img id="overlay-image" class="overlay-product-image" alt="Product">
        <div class="product-info">
          <div id="overlay-product-details"></div>
        </div>
      </div>
      <div class="sizes-grid" id="sizes-grid"></div>
      <div class="overlay-actions">
        <button class="cancel-btn" onclick="closeOverlay()">Cancel</button>
        <button class="add-order-btn" onclick="addToOrders()">Add to Orders</button>
      </div>
    </div>
  </div>

  <script src="products.js"></script>
  <script src="script.js"></script>
  
  <script>
    // Handle disabled button clicks
    document.querySelectorAll('.nav-btn.disabled').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        alert('This feature is coming soon!');
      });
    });

    // Set active state based on current page
    function setActiveButton() {
      const currentPage = window.location.pathname.split('/').pop();
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
        const href = btn.getAttribute('href');
        if (href && href === currentPage) {
          btn.classList.add('active');
        }
      });
    }

    // Call on page load
    document.addEventListener('DOMContentLoaded', setActiveButton);
  </script>
</body>
</html>
